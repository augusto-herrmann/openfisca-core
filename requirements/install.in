# Please make sure to cap all dependency versions, in order to avoid unwanted
# functional and integration breaks caused by external code updates.
#
# These are general dependencies, so:
#
# * the ranges should be broad, and
# * the number of them kept discreet.
#
# If a dependency seems trivial, please propose a pull request to remove it.
#
# General Rule
# ========
#
# * Cap to latest major.
#
# NumPy Rule
# ========
#
# * Cap to latest four minors (document why).
#
# Exceptions
# ========
#
# * Avoiding a version (document why).
# * Pinning a version (document why).

# For globing over dictionaries as if they were filesystems.
#
# We support from 1.3.2 on because it is the first version published
# following the semantic versioning specification.
#
# We do not support 2 yet because of a bug introduced to period parsing in
# OpenFisca's Web API.
dpath >= 1.3.2, < 2

# For evaluating numerical expressions
#
# We support numexpr >= 2.7.1 because it is the first version compatible with
# Python 3.7.
numexpr >= 2.7.1, < 3

# For vectorial support
#
# We support the latest four minors because NumPy is generally a transitive
# dependency that users rely on within the projects where OpenFisca is
# depended on by.
#
# TODO: support for < 1.17 should be dropped.
numpy ~= 1.11, < 1.21

# Memory monitoring for caching.
#
# We support psutil >= 5.4.7 because it is the first version compatible with
# Python 3.7.
psutil >= 5.4.7, < 6

# For openfisca test
#
# We support pytest >= 5.4.2 because `openfisca test` relies on the signature of
# `pytest.Item.from_module()` introduced since this 5.4.2.
#
# We do not support 6 yet because it requires fixing some tests before.
# See: https://docs.pytest.org/en/stable/deprecations.html#node-construction-changed-to-node-from-parent
pytest >= 5.4.2, < 6

# For parameters, tests
#
# TODO: support for 3 should be dropped.
# TODO: support for 4 should be dropped.
PyYAML >= 3.10, < 6

# For sorting formulas by period.
sortedcontainers >= 2, < 3
